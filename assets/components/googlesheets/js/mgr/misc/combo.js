GoogleSheets.combo.Search=function(e){e=e||{},Ext.applyIf(e,{xtype:"twintrigger",ctCls:"x-field-search",allowBlank:!0,msgTarget:"under",emptyText:_("search"),name:"query",triggerAction:"all",clearBtnCls:"x-field-search-clear",searchBtnCls:"x-field-search-go",onTrigger1Click:this._triggerSearch,onTrigger2Click:this._triggerClear}),GoogleSheets.combo.Search.superclass.constructor.call(this,e),this.on("render",function(){this.getEl().addKeyListener(Ext.EventObject.ENTER,function(){this._triggerSearch()},this)}),this.addEvents("clear","search")},Ext.extend(GoogleSheets.combo.Search,Ext.form.TwinTriggerField,{initComponent:function(){Ext.form.TwinTriggerField.superclass.initComponent.call(this),this.triggerConfig={tag:"span",cls:"x-field-search-btns",cn:[{tag:"div",cls:"x-form-trigger "+this.searchBtnCls},{tag:"div",cls:"x-form-trigger "+this.clearBtnCls}]}},_triggerSearch:function(){this.fireEvent("search",this)},_triggerClear:function(){this.fireEvent("clear",this)}}),Ext.reg("gs-combo-search",GoogleSheets.combo.Search),Ext.reg("gs-field-search",GoogleSheets.combo.Search),GoogleSheets.combo.ComboBoxDefault=function(e){e=e||{},Ext.applyIf(e,{assertValue:function(){var e,t=this.getRawValue();if(!(e=(e=this.valueField&&Ext.isDefined(this.value)?this.findRecord(this.valueField,this.value):e)&&e.get(this.displayField)!=t?null:e)&&this.forceSelection)0<t.length&&t!=this.emptyText?(this.el.dom.value=Ext.value(this.lastSelectionText,""),this.applyEmptyText()):this.clearValue();else{if(e&&this.valueField){if(this.value==t)return;t=e.get(this.valueField||this.displayField)}this.setValue(t)}}}),GoogleSheets.combo.ComboBoxDefault.superclass.constructor.call(this,e)},Ext.extend(GoogleSheets.combo.ComboBoxDefault,MODx.combo.ComboBox),Ext.reg("gs-combo-combobox-default",GoogleSheets.combo.ComboBoxDefault),GoogleSheets.combo.Getlist=function(o){o=o||{},Ext.applyIf(o,{id:Ext.id(),url:GoogleSheets.config.connectorUrl,hiddenName:o.name,fields:["id","name"],displayField:"name",valueField:"id",editable:1,emptyText:_("gs_combo_empty"),mode:"remote",anchor:"100%",width:"100%",pageSize:10,allowBlank:1,autoLoad:1,triggerConfig:{tag:"div",cls:"x-superboxselect-btns",cn:[{tag:"div",cls:"x-superboxselect-btn-expand x-form-trigger"},{tag:"div",cls:"x-superboxselect-btn-clear x-form-trigger"}]},onTriggerClick:function(e,t){t&&Ext.get(t).hasClass("x-superboxselect-btn-clear")?(Ext.getCmp(o.id).setValue(),this.fireEvent("render",this)):MODx.combo.ComboBox.superclass.onTriggerClick.call(this)}}),GoogleSheets.combo.Getlist.superclass.constructor.call(this,o),setTimeout(()=>{o.store.load()},1e3)},Ext.extend(GoogleSheets.combo.Getlist,GoogleSheets.combo.ComboBoxDefault),Ext.reg("gs-combo-getlist",GoogleSheets.combo.Getlist);